# Проект: Система Call-центра с использованием RAG

## Описание проекта
Данный проект представляет собой систему для реализации Call-центра, использующую подход Retrieval-Augmented Generation (RAG) для обработки запросов. Основные возможности системы включают:

- Поиск ответов в документации на основе вопросов пользователей.
- Авторизация пользователей перед доступом к системе.
- Поддержка голосового и текстового ввода.
- Высокая производительность за счёт локальной работы модели.
- Обеспечение конфиденциальности данных благодаря локальной обработке запросов.

## Основные компоненты системы

1. **Документация**:
   - Документы в формате `.txt` хранятся в папке `documentation`.
   - LangChain обрабатывает документы, парсит их и сохраняет в векторную базу данных Qdrant.

2. **Векторная база данных**:
   - Используется Qdrant для быстрого поиска релевантной информации.

3. **Модели обработки данных**:
   - Локальная NLP-модель (например, RuBERT или RuGPT-3) для поиска ответов в документах.
   - Модель распознавания речи для голосового ввода (Whisper или Silero).

4. **База данных пользователей**:
   - PostgreSQL для хранения информации о пользователях и их паролях.

5. **Оркестратор**:
   - Управляет запросами пользователей.
   - Проверяет авторизацию и перенаправляет запросы на поиск данных или повторный ввод пароля.

6. **Голосовой чат (UI)**:
   - Интерфейс для взаимодействия с системой, поддерживающий текстовый и голосовой ввод.

7. **Фреймворк валидации данных**:
   - Обобщенная система валидации и обеспечения целостности данных.
   - Поддерживает различные типы правил валидации: формат, диапазон, полнота, уникальность, кросс-поля и пользовательские правила.
   - Включает расширенные возможности кросс-поля валидации для сложных бизнес-логик.
   - Предоставляет REST API для управления правилами валидации.
   - Имеет пользовательский интерфейс для настройки и тестирования правил валидации.

## Архитектура

![Архитектура проекта](https://via.placeholder.com/800x400 "Схема архитектуры")

### Поток данных:
1. Пользователь вводит запрос (текстом или голосом) через UI.
2. Если запрос голосовой, используется модель распознавания речи.
3. Оркестратор проверяет авторизацию пользователя через PostgreSQL.
4. Если пользователь авторизован, запрос направляется в LangChain и Qdrant для поиска ответа.
5. Данные могут быть дополнительно обработаны с использованием фреймворка валидации данных для обеспечения целостности и соответствия бизнес-правилам.
6. Ответ возвращается пользователю через UI.

## Технологии

### Основной стек технологий:
- **LangChain.js**: обработка и парсинг данных.
- **Qdrant**: векторная база данных.
- **PostgreSQL**: база данных для хранения пользователей.
- **Fastify.js**: серверная часть API.
- **React.js**: интерфейс пользователя.
- **Whisper/Silero**: распознавание речи.
- **Express.js**: веб-фреймворк для API валидации.
- **AJV**: валидация JSON-схем.

### Инфраструктура:
- **Docker**: изоляция и развёртывание компонентов.
- **Docker Compose**: управление инфраструктурой.

## Установка и запуск

### Требования:
- Docker
- Docker Compose

### Инструкция по запуску:

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/username/call-center-rag.git
   cd call-center-rag
   ```

2. Настройте переменные окружения в `.env` файле:
   ```env
   POSTGRES_USER=postgres
   POSTGRES_PASSWORD=postgres
   POSTGRES_DB=call_center
   QDRANT_HOST=qdrant
   ```

3. Запустите систему с помощью Docker Compose:
   ```bash
   docker-compose up --build
   ```

4. Система запускает следующие сервисы:
   - Основной UI: http://localhost:8080
   - API валидации: http://localhost:3003
   - API управления правилами валидации: http://localhost:3004
   - UI управления правилами валидации: http://localhost:3005

5. Откройте интерфейс в браузере:
   ```
   http://localhost:8080
   ```

## Использование

### Работа с системой:
1. Введите текстовый запрос в поле чата или используйте голосовой ввод.
2. Если не авторизованы, введите свой пароль для доступа.
3. После авторизации задавайте вопросы, и система предоставит ответы из документации.

## Будущие улучшения
- Добавление поддержки мультиязычности.
- Интеграция дополнительных моделей для сложных запросов.
- Расширение функциональности UI.
- Улучшение системы валидации данных с поддержкой более сложных бизнес-правил.
- Интеграция валидации в основной рабочий процесс системы.
